(function(){"use strict";var t={314:function(t,e,n){var o=n(963),r=n(252),i=n(577);const l=["href"],a={key:0},s=["onClick"],c={key:1};function u(t,e,n,u,d,f){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",null,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>d.id=t)},null,512),[[o.nr,d.id]])]),(0,r._)("div",null,[(0,r._)("button",{onClick:e[1]||(e[1]=(...t)=>f.fetchZip&&f.fetchZip(...t))},"Fetch")]),(0,r._)("div",null,[(0,r._)("a",{href:f.spreadsheetUrl,target:"_blank"},(0,i.zw)(f.spreadsheetUrl),9,l)]),d.files.length>0?((0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d.files,((t,e)=>((0,r.wg)(),(0,r.iD)("li",{key:e},[(0,r._)("span",null,(0,i.zw)(t),1),(0,r._)("button",{onClick:e=>f.convertFile(t)},"Convert",8,s)])))),128))])])):(0,r.kq)("",!0),(0,r.wy)((0,r._)("textarea",{cols:"100",rows:"40","onUpdate:modelValue":e[2]||(e[2]=t=>d.json=t)},null,512),[[o.nr,d.json]]),d.json.length>0?((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("button",{onClick:e[3]||(e[3]=(...t)=>f.downloadHandler&&f.downloadHandler(...t))},"Download"),(0,r._)("button",{onClick:e[4]||(e[4]=(...t)=>f.copyToClipboard&&f.copyToClipboard(...t))},"Copy to clipboard")])):(0,r.kq)("",!0)],64)}var d=n(733),f=n.n(d),h=n(162),p=n.n(h);const g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},w=Object.fromEntries(Object.entries(g).map((([t,e])=>[e,t])));async function y(t){const e=`https://docs.google.com/spreadsheets/export?format=zip&id=${t}`,n=await fetch(e),o=await n.blob(),r=await f().loadAsync(o);return r}function b(t){const e=(new DOMParser).parseFromString(t,"text/html"),n=e.querySelectorAll("tbody > tr"),o=Array.from(n).map((t=>Array.from(t.querySelectorAll("td")).map((t=>{const e=t.innerHTML.replace(/<br>/g,"\n");return m(e)}))));return o}function m(t){const e=new RegExp(`(${Object.keys(w).join("|")})`,"g");return t.replace(e,(t=>w[t]))}function v(t,e){return t.filter((t=>{const n=t[0].startsWith(e),o=t.every((t=>0===t.trim().length));return!n&&!o}))}function j(t,e){const n={},o=t[0];for(let i=1;i<o.length;i++){let r=o[i];const l=r.startsWith(e.ignoreSymbol);if(e.excludeLang&&l)continue;l&&(r=r.substring(e.ignoreSymbol.length).trim());const a={};for(let e=1;e<t.length;e++){const n=t[e][0];a[n]=t[e][i]}n[r]=a}const r=JSON.stringify(n,null,2);return r}class k{constructor(t){this.id=t,this.options={ignoreSymbol:"#",excludeLang:!0}}update(t){this.id=t}async fetchZip(){this.zip=await y(this.id)}getFiles(){return Object.values(this.zip.files).map((t=>t.name)).filter((t=>t.endsWith(".html"))).map((t=>t.replace(".html","")))}async fromFile(t){const e=await this.zip.file(t+".html").async("string"),n=v(b(e),this.options.ignoreSymbol),o=j(n,this.options);return o}saveFile(t){const e=new Blob([t],{type:"text/plain;charset=utf-8;"}),n=Date.now(),o=(n-n%1e3)/1e3,r=`thx for using - ${o}.json`;p().saveAs(e,r)}}var O={components:{},data(){return{id:"",localizer:new k,files:[],json:""}},watch:{id(t){this.localizer.update(t)}},created(){this.localizer.update(this.id)},mounted(){const t=new URLSearchParams(window.location.search);if(t.has("id")){const e=t.get("id");this.id=e}},methods:{async fetchZip(){this.json="",this.files=[],await this.localizer.fetchZip(),this.files=this.localizer.getFiles()},async convertFile(t){this.json=await this.localizer.fromFile(t)},downloadHandler(){this.localizer.saveFile(this.json)},async copyToClipboard(){try{await window.navigator.clipboard.writeText(this.json),alert("Done")}catch{alert("Failed to copy to clipboard")}}},computed:{spreadsheetUrl(){return`https://docs.google.com/spreadsheets/d/${this.id}`}}},_=n(744);const x=(0,_.Z)(O,[["render",u]]);var z=x;(0,o.ri)(z).mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,i){if(!o){var l=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],i=t[u][2];for(var a=!0,s=0;s<o.length;s++)(!1&i||l>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[s])}))?o.splice(s--,1):(a=!1,i<l&&(l=i));if(a){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[o,r,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,i,l=o[0],a=o[1],s=o[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(s)var u=s(n)}for(e&&e(o);c<l.length;c++)i=l[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},o=self["webpackChunklocalizer_tool"]=self["webpackChunklocalizer_tool"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(314)}));o=n.O(o)})();
//# sourceMappingURL=app.18dc02ec.js.map